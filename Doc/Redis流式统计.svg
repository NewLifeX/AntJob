<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" height="804" xmlns:ev="http://www.w3.org/2001/xml-events" viewBox="0 0 1132 804" width="1132"><defs/><g id="page1" transform="translate(5.5,5.5)"><rect fill="#17202d" x="0" height="794" y="0" width="1123"/><g id="shape1" transform="translate(37.18,48.34)"><path stroke-width="3" fill="#ff5f5f" fill-rule="nonzero" stroke="#42c0ca" d="M1048.2,56.7L1048.2,.0L.0,.0L.0,56.7L1048.2,56.7z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:16.00pt;font-weight:bold" xml:space="preserve"><tspan x="452.4" y="35.8">Redis流式统计</tspan></text></g><g id="group2" transform="translate(37.18,115.37)"><g id="group3"><path id="shape4" stroke-width="3" fill="none" stroke="#42c0ca" d="M.0,.0L1048.2,.0L1048.2,210.0L.0,210.0L.0,.0z"/><g id="shape5" transform="matrix(0.00,-1.00,1.00,0.00,-0.0,210.0)"><path stroke-width="3" fill="#ff5f5f" fill-rule="nonzero" stroke="#42c0ca" d="M.0,.0L210.0,.0L210.0,56.7L.0,56.7L.0,.0z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:14.00pt;font-weight:bold" xml:space="preserve"><tspan x="67.7" y="34.2">应用统计</tspan></text></g></g><g id="group6" transform="translate(0.00,210.00)"><path id="shape7" stroke-width="3" fill="none" stroke="#42c0ca" d="M.0,.0L1048.2,.0L1048.2,210.0L.0,210.0L.0,.0z"/><g id="shape8" transform="matrix(0.00,-1.00,1.00,0.00,-0.0,210.0)"><path stroke-width="3" fill="#ff5f5f" fill-rule="nonzero" stroke="#42c0ca" d="M.0,.0L210.0,.0L210.0,56.7L.0,56.7L.0,.0z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:14.00pt;font-weight:bold" xml:space="preserve"><tspan x="79.3" y="34.2">Redis</tspan></text></g></g><g id="group9" transform="translate(0.00,420.00)"><path id="shape10" stroke-width="3" fill="none" stroke="#42c0ca" d="M.0,.0L1048.2,.0L1048.2,210.0L.0,210.0L.0,.0z"/><g id="shape11" transform="matrix(0.00,-1.00,1.00,0.00,-0.0,210.0)"><path stroke-width="3" fill="#ff5f5f" fill-rule="nonzero" stroke="#42c0ca" d="M.0,.0L210.0,.0L210.0,56.7L.0,56.7L.0,.0z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:14.00pt;font-weight:bold" xml:space="preserve"><tspan x="67.7" y="34.2">数据归约</tspan></text></g></g></g><g id="shape12" transform="translate(137.69,168.59)"><path stroke-width="3" fill="#dc8251" fill-rule="nonzero" stroke="#ffffff" d="M22.7,45.3L89.7,45.3L89.7,45.3C102.3,45.3,112.4,35.2,112.4,22.7C112.4,10.1,102.3,.0,89.7,.0L22.7,.0L22.7,.0C10.1,.0,.0,10.1,.0,22.7C.0,35.2,10.1,45.3,22.7,45.3z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="36.2" y="26.2">数据源</tspan></text></g><g id="shape13" transform="translate(250.10,191.26)"><path fill="none" stroke="#4cdae6" d="M.0,.0L57.0,.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M57.0,-3.0L63.0,.0L57.0,3.0L57.0,-3.0"/></g><g id="shape14" transform="translate(314.83,154.82)"><path stroke-width="3" fill="#9dc24e" fill-rule="nonzero" stroke="#ffffff" d="M128.9,72.9L128.9,.0L.0,.0L.0,72.9L128.9,72.9z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="37.8" y="30.1">统计逻辑</tspan><tspan x="10.1" y="48.1">Key=SiteId+Date</tspan></text></g><g id="shape15" transform="translate(308.30,354.33)"><path stroke-width="3" fill="#7c52d2" fill-rule="nonzero" stroke="#ffffff" d="M142.0,61.9L142.0,.0L.0,.0L.0,61.9L142.0,61.9z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="6.3" y="34.1">HASH { Total, Error }</tspan></text></g><g id="shape16" transform="translate(722.97,160.32)"><path stroke-width="3" fill="#7c52d2" fill-rule="nonzero" stroke="#ffffff" d="M112.4,61.9L112.4,.0L.0,.0L.0,61.9L112.4,61.9z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="16.2" y="34.2">放入处理队列</tspan></text></g><g id="shape17" transform="translate(527.15,386.22)"><path stroke-width="3" fill="#9dc24e" fill-rule="nonzero" stroke="#ffffff" d="M112.4,61.9L112.4,.0L.0,.0L.0,61.9L112.4,61.9z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="31.9" y="34.2">STRING</tspan></text></g><g id="shape18" transform="translate(722.43,386.22)"><path stroke-width="3" fill="#7c52d2" fill-rule="nonzero" stroke="#ffffff" d="M112.4,61.9L112.4,.0L.0,.0L.0,61.9L112.4,61.9z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="17.9" y="34.2">DelayQueue</tspan></text></g><g id="shape19" transform="translate(920.48,386.22)"><path stroke-width="3" fill="#9dc24e" fill-rule="nonzero" stroke="#ffffff" d="M112.4,61.9L112.4,.0L.0,.0L.0,61.9L112.4,61.9z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="35.5" y="34.2">Queue</tspan></text></g><g id="shape20" transform="translate(920.48,604.26)"><path stroke-width="3" fill="#7c52d2" fill-rule="nonzero" stroke="#ffffff" d="M112.4,61.9L112.4,.0L.0,.0L.0,61.9L112.4,61.9z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="29.5" y="34.2">消费处理</tspan></text></g><g id="shape21" transform="translate(318.96,450.95)"><path stroke-width="3" fill="#9dc24e" fill-rule="nonzero" stroke="#ffffff" d="M120.7,61.9L120.7,.0L.0,.0L.0,61.9L120.7,61.9z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="35.7" y="34.1">newKey</tspan></text></g><g id="shape22" transform="translate(137.69,612.53)"><path stroke-width="3" fill="#dc8251" fill-rule="nonzero" stroke="#ffffff" d="M22.7,45.3L89.7,45.3L89.7,45.3C102.3,45.3,112.4,35.2,112.4,22.7C112.4,10.1,102.3,.0,89.7,.0L22.7,.0L22.7,.0C10.1,.0,.0,10.1,.0,22.7C.0,35.2,10.1,45.3,22.7,45.3z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="36.2" y="26.2">统计表</tspan></text></g><g id="shape23" transform="translate(379.29,227.70)"><path fill="none" stroke="#4cdae6" d="M.0,.0L.0,120.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M3.0,120.0L.0,126.0L-3.0,120.0L3.0,120.0"/><rect fill="#ffffff" x="-24.7" height="18.0" y="26.8" width="51.3"/><rect fill="#ffffff" x="-25.0" height="18.0" y="44.8" width="52.0"/><text style="fill:#35a0a9;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="-24.7" y="40.8">Total++</tspan><tspan x="-25.0" y="58.8">Error++</tspan></text></g><g id="shape24" transform="translate(518.90,158.45)"><path stroke-width="3" fill="#42c0ca" fill-rule="nonzero" stroke="#ffffff" d="M64.5,65.6L128.9,32.8L64.5,.0L.0,32.8L64.5,65.6z"/><text style="fill:#ffffff;font-family:Microsoft YaHei UI;font-size:9.00pt" xml:space="preserve"><tspan x="30.1" y="35.6">该Key待处理</tspan></text></g><g id="shape25" transform="translate(443.75,191.26)"><path fill="none" stroke="#4cdae6" d="M.0,.0L68.0,.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M68.0,-3.0L74.0,.0L68.0,3.0L68.0,-3.0"/></g><g id="shape26" transform="translate(583.36,224.07)"><path fill="none" stroke="#4cdae6" d="M.0,.0L.0,155.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M3.0,155.0L.0,161.0L-3.0,155.0L3.0,155.0"/><rect fill="#ffffff" x="-12.3" height="18.0" y="42.7" width="26.7"/><text style="fill:#35a0a9;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="-12.3" y="56.7">Add</tspan></text></g><g id="shape27" transform="translate(647.81,191.26)"><path fill="none" stroke="#4cdae6" d="M.0,.0L68.0,.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M68.0,-3.0L74.0,.0L68.0,3.0L68.0,-3.0"/><rect fill="#ffffff" x="26.6" height="18.0" y="-10.8" width="13.3"/><text style="fill:#35a0a9;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="26.6" y="3.2">是</tspan></text></g><g id="shape28" transform="translate(920.48,160.32)"><path stroke-width="3" fill="#9dc24e" fill-rule="nonzero" stroke="#ffffff" d="M112.4,61.9L112.4,.0L.0,.0L.0,61.9L112.4,61.9z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="42.9" y="34.2">完成</tspan></text></g><g id="shape29" transform="translate(583.36,158.45)"><path fill="none" stroke="#4cdae6" d="M.0,.0L.0,-28.0L393.0,-28.0L393.0,-4.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M396.0,-4.0L393.0,2.0L390.0,-4.0L396.0,-4.0"/><rect fill="#ffffff" x="254.6" height="18.0" y="-38.8" width="13.3"/><text style="fill:#35a0a9;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="254.6" y="-24.8">否</tspan></text></g><g id="shape30" transform="translate(779.18,222.20)"><path fill="none" stroke="#4cdae6" d="M.0,.0L.0,157.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M3.0,157.0L.0,163.0L-3.0,157.0L3.0,157.0"/><rect fill="#ffffff" x="-30.0" height="18.0" y="47.1" width="62.0"/><text style="fill:#35a0a9;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="-30.0" y="61.1">AddDelay</tspan></text></g><g id="shape31" transform="translate(834.85,417.16)"><path fill="none" stroke="#4cdae6" d="M.0,.0L80.0,.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M80.0,-3.0L86.0,.0L80.0,3.0L80.0,-3.0"/><rect fill="#ffffff" x="24.9" height="18.0" y="-10.8" width="26.7"/><text style="fill:#35a0a9;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="24.9" y="3.2">到期</tspan></text></g><g id="shape32" transform="translate(976.69,448.10)"><path fill="none" stroke="#4cdae6" d="M.0,.0L.0,149.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M3.0,149.0L.0,155.0L-3.0,149.0L3.0,149.0"/></g><g id="shape33" transform="translate(920.48,635.20)"><path fill="none" stroke="#4cdae6" d="M.0,.0L-443.0,.0L-443.0,-250.0L-463.0,-250.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M-463.0,-247.0L-469.0,-250.0L-463.0,-253.0L-463.0,-247.0"/><rect fill="#ffffff" x="-307.2" height="18.0" y="-10.8" width="51.3"/><text style="fill:#35a0a9;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="-307.2" y="3.2">Rename</tspan></text></g><g id="shape34" transform="translate(308.30,385.27)"><path fill="none" stroke="#4cdae6" d="M.0,.0L-28.0,.0L-28.0,95.0L4.0,95.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M4.0,92.0L10.0,95.0L4.0,98.0L4.0,92.0"/><rect fill="#ffffff" x="-52.7" height="18.0" y="28.1" width="51.3"/><text style="fill:#35a0a9;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="-52.7" y="42.1">Rename</tspan></text></g><g id="shape35" transform="translate(323.08,604.26)"><path stroke-width="3" fill="#7c52d2" fill-rule="nonzero" stroke="#ffffff" d="M112.4,61.9L112.4,.0L.0,.0L.0,61.9L112.4,61.9z"/><text style="fill:#ffffff;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="42.9" y="34.2">落库</tspan></text></g><g id="shape36" transform="translate(379.29,512.83)"><path fill="none" stroke="#4cdae6" d="M.0,.0L.0,85.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M3.0,85.0L.0,91.0L-3.0,85.0L3.0,85.0"/><rect fill="#ffffff" x="-47.0" height="18.0" y="27.9" width="96.0"/><text style="fill:#35a0a9;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="-47.0" y="41.9">GetAll/Remove</tspan></text></g><g id="shape37" transform="translate(323.08,635.20)"><path fill="none" stroke="#4cdae6" d="M.0,.0L-66.0,.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M-66.0,3.0L-72.0,.0L-66.0,-3.0L-66.0,3.0"/></g><g id="shape38" transform="translate(920.48,635.20)"><path fill="none" stroke="#4cdae6" d="M.0,.0L-253.0,.0L-253.0,-218.0L-275.0,-218.0"/><path stroke-width="1" fill="#4cdae6" stroke-linecap="round" stroke="#4cdae6" d="M-275.0,-215.0L-281.0,-218.0L-275.0,-221.0L-275.0,-215.0"/><rect fill="#ffffff" x="-278.0" height="18.0" y="-153.6" width="52.0"/><text style="fill:#35a0a9;font-family:Microsoft YaHei;font-size:10.00pt" xml:space="preserve"><tspan x="-278.0" y="-139.6">Remove</tspan></text></g></g></svg>